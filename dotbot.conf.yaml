- defaults:
    link:
        relink: True
        create: True

# Prepare directories
- clean:
    - '~'
    - '~/.config'

# Run configuration preparation scripts
- shell:
  - command: 'for inpath in *.in; do sed -e "s|@NOTMUCH_DB_PATH@|${MAILDIR:-$HOME/system/mail}|" "$inpath" >"${inpath%.in}"; done'
    description: Localize notmuch configuration

# Link final files
- link:
    ~/.mbsyncrc: mbsyncrc
    ~/.notmuch-config: notmuch-config
    ~/.config/afew/config: afew-config
    ~/.msmtprc: msmtprc
    ~/.muttrc: muttrc
